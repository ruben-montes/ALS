/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2025 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const e="FF_IFRAME_HELPER_INFO",N={UNBLOCK_IFRAME:"UNBLOCK_IFRAME",BALLOON_MESSAGE:"BALLOON_MESSAGE",SIDEBAR:"SIDEBAR",TOPBAR:"TOPBAR",DLS_POPUP:"DLS_POPUP",IS_SIDEBAR_OPENED:"IS_SIDEBAR_OPENED",PING_CONTENT_ANNOTATION:"PING_CONTENT_ANNOTATION",PING_CONTENT_RAT_DETECTION:"PING_CONTENT_RAT_DETECTION",PING_CONTENT_IFRAME_BANNER:"PING_CONTENT_IFRAME_BANNER",PING_CONTENT_AUTOPLAY_DETECTION:"PING_CONTENT_AUTOPLAY_DETECTION",PING_CONTENT_SIDEBAR_MAIN:"PING_CONTENT_SIDEBAR_MAIN",PING_CONTENT_IDPS:"PING_CONTENT_IDPS",PING_CONTENT_APS_TOAST:"PING_CONTENT_APS_TOAST",PING_CONTENT_APS_BALLOON:"PING_CONTENT_APS_BALLOON",PING_CONTENT_APS_OBSERVER:"PING_CONTENT_APS_OBSERVER",PING_CONTENT_SITE_LISTENER:"PING_CONTENT_SITE_LISTENER",PING_CONTENT_DLS_POPUP:"PING_CONTENT_DLS_POPUP",PING_CONTENT_NO_NATIVE_TOAST:"PING_CONTENT_NO_NATIVE_TOAST",PING_CONTENT_CHANGE_NATIVE_INSTALLER_URL:"PING_CONTENT_CHANGE_NATIVE_INSTALLER_URL",PING_CONTENT_MB_VIDEO_CHECK:"PING_CONTENT_MB_VIDEO_CHECK",PING_CONTENT_MB_ACTIVATE_BANNER:"PING_CONTENT_MB_ACTIVATE_BANNER",PING_CONTENT_MB_PAGE_BANNER:"PING_CONTENT_MB_PAGE_BANNER",PING_IFRAME_FORM_CHECK:"PING_IFRAME_FORM_CHECK",PING_IFRAME_FORM_DETECTION:"PING_IFRAME_FORM_DETECTION",PING_IFRAME_BLOCK:"PING_IFRAME_BLOCK",PING_IFRAME_HELPER:"PING_IFRAME_HELPER",PING_CONTENT_MB_BANNER:"PING_CONTENT_MB_BANNER",PING_CONTENT_MB_SIDEBAR:"PING_CONTENT_MB_SIDEBAR",PING_CONTENT_WEB_BOOST_UPSELL:"PING_CONTENT_WEB_BOOST_UPSELL",PING_ESD_TOAST:"PING_ESD_TOAST",PING_CONTENT_SEARCH_CATEGORIZATION:"PING_CONTENT_SEARCH_CATEGORIZATION",MB_BANNER_SHOW:"MB_BANNER_SHOW",MB_BANNER_REMOVE:"MB_BANNER_REMOVE",MB_INITIAL_GRAPH_DATA:"MB_INITIAL_GRAPH_DATA",MB_INCOMING_AUDIO_DATA:"MB_INCOMING_AUDIO_DATA",BROADCAST_MB_UPDATE_UI:"BROADCAST_MB_UPDATE_UI",MB_RESET_GRAPH:"MB_RESET_GRAPH",MB_VIDEO_STARTED:"MB_VIDEO_STARTED",APS_REGISTRATION_PAGE:"APS_REGISTRATION_PAGE",BROADCAST_TO_FOREGROUND:"BROADCAST_TO_FOREGROUND",TRIGGER_AJ_TOAST:"TRIGGER_AJ_TOAST"};const _=0,t="PRINT_IN_BACKGROUND",o={NONE:0,INFO:1,ERROR:2,WARN:3,DEBUG:4,ALL_IN_BACKGROUND:99},s=1,E=2,T=3,n=4,r={BACKGROUND:"BACKGROUND",CONTENT:"CONTENT",TELEMETRY:"TELEMETRY"},i={DEFAULT:"color: #000000; font-weight: normal; font-style:normal; background: #FFFFFF;",BACKGROUND:"color: #8D0DBA; font-weight: bold; background: #FFFFFF;",CONTENT:"color: #F54A26; font-weight: bold; background: #FFFFFF;",TELEMETRY:"color: #147831; font-weight: bold; background: #FFFFFF;"};const I=new class{constructor(){this.storageChecked=!1,this.logLevel=null,this.queue=[];const e="MCLOGLEVEL";chrome?.storage?.local.get([e]).then(N=>{const t=Object.values(o).includes(N[e]);this.logLevel=t?N[e]:_,this.logLevel!==o.NONE&&this.queue.forEach(({callback:e,message:N,processType:_})=>{e(N,_)}),this.queue=[],this.storageChecked=!0})}log(e,N=null){this.storageChecked?this.processLog(e,s,N,this.logLevel):this.queue.push({callback:this.log.bind(this),message:e,processType:N})}error(e,N=null){this.storageChecked?this.processLog(e,E,N,this.logLevel):this.queue.push({callback:this.error.bind(this),message:e,processType:N})}warn(e,N=null){this.storageChecked?this.processLog(e,T,N,this.logLevel):this.queue.push({callback:this.warn.bind(this),message:e,processType:N})}debug(e,N=null){this.storageChecked?this.processLog(e,n,N,this.logLevel):this.queue.push({callback:this.debug.bind(this),message:e,processType:N})}processLog(e,N,_,s){if(s===o.NONE)return;let T="chrome-extension:"===location.protocol?r.BACKGROUND:r.CONTENT;_&&r[_]&&(T=_);const n=this.formatDateWithMilliseconds(new Date),i=N===E?e:`%c[${T} ${n} ]: %c${e}`;T===r.CONTENT&&this.logLevel===o.ALL_IN_BACKGROUND&&chrome.runtime.sendMessage({command:t,logMessage:i,processType:T,logType:N,logLevel:s}),this.printLog(i,T,N,s)}formatDateWithMilliseconds(e){return`${new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).format(e)}.${e.getMilliseconds().toString().padStart(3,"0")}`}printLog(e,N,_,t){const r=i.DEFAULT,I=i[N]||r;if(t>=o.ERROR&&_===E&&console.error(e),t>=o.INFO&&_===s&&console.log(e,I,r),t>=o.WARN&&_===T){const N="color: #FFA500; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cWARN - ${e}`,N,I,r)}if(t>=o.DEBUG&&_===n){const N="color: #FF33D7; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cDEBUG - ${e}`,N,I,r)}}};class c{constructor(e){this.pingCommand=e,this.basePingListener(),this.addIdentifier()}basePingListener(e=null){((e,N=null,_)=>{"function"==typeof _?chrome.runtime.onMessage.addListener((t,o,s)=>{if(o.id===chrome.runtime.id&&"object"==typeof t&&!Array.isArray(t)&&t?.ipcId===e)return _({promises:N,request:t,sender:o,sendResponse:s})}):I.error("Provided with invalid callback function")})("WA",null,({request:N,sendResponse:_})=>{const{command:t}=N;if(t===this.pingCommand)return I.debug(`File Injection [pinged]: Received ${t} command`),_({content:!0}),"function"==typeof e&&e(),!0})}addIdentifier(){var e;e=()=>{const e=document.createElement("span");e.id=this.pingCommand,e.style.cssText="display:none",document.body.appendChild(e)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e))}}const A=async(e,N,_,t)=>{try{chrome.tabs.sendMessage(t,{ipcId:e,command:N,..._},{},()=>{chrome.runtime.lastError})}catch(e){I.warn(`[broadcast] Unexpected error when calling command: "${N}", err: ${e.message}`)}},O=(e,N,_,t,o=null)=>{if(!chrome.tabs)throw new Error('"tabs" permission not set in manifest.');const s={};return"number"==typeof o&&(s.frameId=o),chrome.tabs.sendMessage(t,{ipcId:e,command:N,..._},s)},a=(e,N={},_)=>(async(e,N,_={},t={})=>{try{if(t?.tabId){const{tabId:o,frameId:s}=t;return await O(e,N,_,o,s)}if(t?.broadcast){const o=await chrome.tabs.query({}),{broadcastIgnoreId:s=[]}=t;return o.filter(({id:e})=>!s.includes(e)).forEach(({id:t})=>{A(e,N,_,t)}),!0}return await chrome.runtime.sendMessage({ipcId:e,command:N,..._})}catch(e){return I.warn(`Unexpected error when calling command: "${N}", err: ${e.message}`),null}})("WA",e,N,_);(new class extends c{constructor(){super(N.PING_CONTENT_IFRAME_HELPER),this.onPageShow=this.onPageShow.bind(this)}async main(){window.addEventListener("pageshow",this.onPageShow)}onPageShow(){try{const N=document.querySelectorAll("iframe");if(0===N.length)return!1;const _=[];N.forEach(e=>{const N={frameId:browser.runtime.getFrameId(e),frameSrc:e.src};_.push(N)}),a(e,{listIFrameIdUrl:_})}catch(e){I.error(e.message)}return!0}}).main()})();
//# sourceMappingURL=../sourceMap/chrome/scripts/content_iframe_helper.js.map