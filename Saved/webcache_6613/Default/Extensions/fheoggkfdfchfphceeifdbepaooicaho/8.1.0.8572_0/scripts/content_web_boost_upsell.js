/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2025 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const t="GET_BK_GLOBALS",e="INSTALL_EXTENSION",n="GET_EXTENSION_ID",o="SEND_TELEMETRY",i="UPDATE_SETTINGS_IN_APP_BK",s="GET_WB_SETTINGS",r="PING_CONTENT_WEB_BOOST_UPSELL",a="WEB_BOOST_UPSELL";const l=0,c="PRINT_IN_BACKGROUND",h={NONE:0,INFO:1,ERROR:2,WARN:3,DEBUG:4,ALL_IN_BACKGROUND:99},u=1,d=2,m=3,p=4,f={BACKGROUND:"BACKGROUND",CONTENT:"CONTENT",TELEMETRY:"TELEMETRY"},g={DEFAULT:"color: #000000; font-weight: normal; font-style:normal; background: #FFFFFF;",BACKGROUND:"color: #8D0DBA; font-weight: bold; background: #FFFFFF;",CONTENT:"color: #F54A26; font-weight: bold; background: #FFFFFF;",TELEMETRY:"color: #147831; font-weight: bold; background: #FFFFFF;"};const y=new class{constructor(){this.storageChecked=!1,this.logLevel=null,this.queue=[];const t="MCLOGLEVEL";chrome?.storage?.local.get([t]).then(e=>{const n=Object.values(h).includes(e[t]);this.logLevel=n?e[t]:l,this.logLevel!==h.NONE&&this.queue.forEach(({callback:t,message:e,processType:n})=>{t(e,n)}),this.queue=[],this.storageChecked=!0})}log(t,e=null){this.storageChecked?this.processLog(t,u,e,this.logLevel):this.queue.push({callback:this.log.bind(this),message:t,processType:e})}error(t,e=null){this.storageChecked?this.processLog(t,d,e,this.logLevel):this.queue.push({callback:this.error.bind(this),message:t,processType:e})}warn(t,e=null){this.storageChecked?this.processLog(t,m,e,this.logLevel):this.queue.push({callback:this.warn.bind(this),message:t,processType:e})}debug(t,e=null){this.storageChecked?this.processLog(t,p,e,this.logLevel):this.queue.push({callback:this.debug.bind(this),message:t,processType:e})}processLog(t,e,n,o){if(o===h.NONE)return;let i="chrome-extension:"===location.protocol?f.BACKGROUND:f.CONTENT;n&&f[n]&&(i=n);const s=this.formatDateWithMilliseconds(new Date),r=e===d?t:`%c[${i} ${s} ]: %c${t}`;i===f.CONTENT&&this.logLevel===h.ALL_IN_BACKGROUND&&chrome.runtime.sendMessage({command:c,logMessage:r,processType:i,logType:e,logLevel:o}),this.printLog(r,i,e,o)}formatDateWithMilliseconds(t){return`${new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).format(t)}.${t.getMilliseconds().toString().padStart(3,"0")}`}printLog(t,e,n,o){const i=g.DEFAULT,s=g[e]||i;if(o>=h.ERROR&&n===d&&console.error(t),o>=h.INFO&&n===u&&console.log(t,s,i),o>=h.WARN&&n===m){const e="color: #FFA500; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cWARN - ${t}`,e,s,i)}if(o>=h.DEBUG&&n===p){const e="color: #FF33D7; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cDEBUG - ${t}`,e,s,i)}}};class T{constructor(t){this.pingCommand=t,this.basePingListener(),this.addIdentifier()}basePingListener(t=null){((t,e=null,n)=>{"function"==typeof n?chrome.runtime.onMessage.addListener((o,i,s)=>{if(i.id===chrome.runtime.id&&"object"==typeof o&&!Array.isArray(o)&&o?.ipcId===t)return n({promises:e,request:o,sender:i,sendResponse:s})}):y.error("Provided with invalid callback function")})("WA",null,({request:e,sendResponse:n})=>{const{command:o}=e;if(o===this.pingCommand)return y.debug(`File Injection [pinged]: Received ${o} command`),n({content:!0}),"function"==typeof t&&t(),!0})}addIdentifier(){var t;t=()=>{const t=document.createElement("span");t.id=this.pingCommand,t.style.cssText="display:none",document.body.appendChild(t)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?t():document.addEventListener("DOMContentLoaded",t))}}class b{onHttpResponse(t){if(!t){const e="[HttpService:onHttpResponse] invalid response.";return y.warn(e),t}if(!t.ok){const e=`[HttpService:onHttpResponse] status: ${t.status}, errortext: ${t.statusText}`;y.warn(e)}return t}async sendHttpRequest({url:t,headers:e,body:n,method:o="GET"},i=!0){try{e||(e={}),i&&(e["Cache-Control"]="no-cache");const s={headers:e,method:o,body:n};y.debug(`[sendHttpRequest] url: ${t}, options: ${JSON.stringify(s)}`);const r=await fetch(t,s);return await this.onHttpResponse(r)}catch(e){return y.error(`[sendHttpRequest] Failed to fetch on: "${t}", got error: ${e?.message}`),null}}async sendHttpRequestJson({url:t,headers:e,body:n,method:o="GET"},i={},s=!0){const r=await this.sendHttpRequest({url:t,headers:e,body:n,method:o},s);if(!r||!r.ok)return i;try{return await r.json()}catch(e){return y.warn(`[HttpService.sendHttpRequestJson] Failed to convert response to JSON on: "${t}", got error: ${e?.message}`),i}}async sendHttpRequestText({url:t,headers:e,body:n,method:o="GET"},i="",s=!0){const r=await this.sendHttpRequest({url:t,headers:e,body:n,method:o},s);if(!r||!r.ok)return i;try{return(await r.text()).trim()}catch(e){return y.warn(`[HttpService.sendHttpRequestText] Failed to convert response to Text on: "${t}", got error: ${e?.message}`),i}}}
/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */
const{entries:_,setPrototypeOf:w,isFrozen:E,getPrototypeOf:S,getOwnPropertyDescriptor:N}=Object;let{freeze:A,seal:C,create:R}=Object,{apply:L,construct:D}="undefined"!=typeof Reflect&&Reflect;A||(A=function(t){return t}),C||(C=function(t){return t}),L||(L=function(t,e,n){return t.apply(e,n)}),D||(D=function(t,e){return new t(...e)});const v=$(Array.prototype.forEach),x=$(Array.prototype.lastIndexOf),I=$(Array.prototype.pop),O=$(Array.prototype.push),k=$(Array.prototype.splice),M=$(String.prototype.toLowerCase),H=$(String.prototype.toString),F=$(String.prototype.match),U=$(String.prototype.replace),P=$(String.prototype.indexOf),q=$(String.prototype.trim),z=$(Object.prototype.hasOwnProperty),G=$(RegExp.prototype.test),B=(W=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return D(W,e)});var W;function $(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return L(t,e,o)}}function j(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;w&&w(t,null);let o=e.length;for(;o--;){let i=e[o];if("string"==typeof i){const t=n(i);t!==i&&(E(e)||(e[o]=t),i=t)}t[i]=!0}return t}function Y(t){for(let e=0;e<t.length;e++){z(t,e)||(t[e]=null)}return t}function K(t){const e=R(null);for(const[n,o]of _(t)){z(t,n)&&(Array.isArray(o)?e[n]=Y(o):o&&"object"==typeof o&&o.constructor===Object?e[n]=K(o):e[n]=o)}return e}function X(t,e){for(;null!==t;){const n=N(t,e);if(n){if(n.get)return $(n.get);if("function"==typeof n.value)return $(n.value)}t=S(t)}return function(){return null}}const J=A(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V=A(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Z=A(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Q=A(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tt=A(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),et=A(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nt=A(["#text"]),ot=A(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),it=A(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),st=A(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rt=A(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),at=C(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lt=C(/<%[\w\W]*|[\w\W]*%>/gm),ct=C(/\$\{[\w\W]*/gm),ht=C(/^data-[\-\w.\u00B7-\uFFFF]+$/),ut=C(/^aria-[\-\w]+$/),dt=C(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mt=C(/^(?:\w+script|data):/i),pt=C(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ft=C(/^html$/i),gt=C(/^[a-z][.\w]*(-[.\w]+)+$/i);var yt=Object.freeze({__proto__:null,ARIA_ATTR:ut,ATTR_WHITESPACE:pt,CUSTOM_ELEMENT:gt,DATA_ATTR:ht,DOCTYPE_NAME:ft,ERB_EXPR:lt,IS_ALLOWED_URI:dt,IS_SCRIPT_OR_DATA:mt,MUSTACHE_EXPR:at,TMPLIT_EXPR:ct});const Tt=1,bt=3,_t=7,wt=8,Et=9,St=function(){return"undefined"==typeof window?null:window};var Nt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();const n=e=>t(e);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==Et||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const i=o,s=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:h,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:m,trustedTypes:p}=e,f=c.prototype,g=X(f,"cloneNode"),y=X(f,"remove"),T=X(f,"nextSibling"),b=X(f,"childNodes"),w=X(f,"parentNode");if("function"==typeof a){const t=o.createElement("template");t.content&&t.content.ownerDocument&&(o=t.content.ownerDocument)}let E,S="";const{implementation:N,createNodeIterator:C,createDocumentFragment:L,getElementsByTagName:D}=o,{importNode:W}=i;let $={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof _&&"function"==typeof w&&N&&void 0!==N.createHTMLDocument;const{MUSTACHE_EXPR:Y,ERB_EXPR:at,TMPLIT_EXPR:lt,DATA_ATTR:ct,ARIA_ATTR:ht,IS_SCRIPT_OR_DATA:ut,ATTR_WHITESPACE:mt,CUSTOM_ELEMENT:pt}=yt;let{IS_ALLOWED_URI:gt}=yt,Nt=null;const At=j({},[...J,...V,...Z,...tt,...nt]);let Ct=null;const Rt=j({},[...ot,...it,...st,...rt]);let Lt=Object.seal(R(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Dt=null,vt=null,xt=!0,It=!0,Ot=!1,kt=!0,Mt=!1,Ht=!0,Ft=!1,Ut=!1,Pt=!1,qt=!1,zt=!1,Gt=!1,Bt=!0,Wt=!1,$t=!0,jt=!1,Yt={},Kt=null;const Xt=j({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Jt=null;const Vt=j({},["audio","video","img","source","image","track"]);let Zt=null;const Qt=j({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),te="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",ne="http://www.w3.org/1999/xhtml";let oe=ne,ie=!1,se=null;const re=j({},[te,ee,ne],H);let ae=j({},["mi","mo","mn","ms","mtext"]),le=j({},["annotation-xml"]);const ce=j({},["title","style","font","a","script"]);let he=null;const ue=["application/xhtml+xml","text/html"];let de=null,me=null;const pe=o.createElement("form"),fe=function(t){return t instanceof RegExp||t instanceof Function},ge=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!me||me!==t){if(t&&"object"==typeof t||(t={}),t=K(t),he=-1===ue.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,de="application/xhtml+xml"===he?H:M,Nt=z(t,"ALLOWED_TAGS")?j({},t.ALLOWED_TAGS,de):At,Ct=z(t,"ALLOWED_ATTR")?j({},t.ALLOWED_ATTR,de):Rt,se=z(t,"ALLOWED_NAMESPACES")?j({},t.ALLOWED_NAMESPACES,H):re,Zt=z(t,"ADD_URI_SAFE_ATTR")?j(K(Qt),t.ADD_URI_SAFE_ATTR,de):Qt,Jt=z(t,"ADD_DATA_URI_TAGS")?j(K(Vt),t.ADD_DATA_URI_TAGS,de):Vt,Kt=z(t,"FORBID_CONTENTS")?j({},t.FORBID_CONTENTS,de):Xt,Dt=z(t,"FORBID_TAGS")?j({},t.FORBID_TAGS,de):{},vt=z(t,"FORBID_ATTR")?j({},t.FORBID_ATTR,de):{},Yt=!!z(t,"USE_PROFILES")&&t.USE_PROFILES,xt=!1!==t.ALLOW_ARIA_ATTR,It=!1!==t.ALLOW_DATA_ATTR,Ot=t.ALLOW_UNKNOWN_PROTOCOLS||!1,kt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Mt=t.SAFE_FOR_TEMPLATES||!1,Ht=!1!==t.SAFE_FOR_XML,Ft=t.WHOLE_DOCUMENT||!1,qt=t.RETURN_DOM||!1,zt=t.RETURN_DOM_FRAGMENT||!1,Gt=t.RETURN_TRUSTED_TYPE||!1,Pt=t.FORCE_BODY||!1,Bt=!1!==t.SANITIZE_DOM,Wt=t.SANITIZE_NAMED_PROPS||!1,$t=!1!==t.KEEP_CONTENT,jt=t.IN_PLACE||!1,gt=t.ALLOWED_URI_REGEXP||dt,oe=t.NAMESPACE||ne,ae=t.MATHML_TEXT_INTEGRATION_POINTS||ae,le=t.HTML_INTEGRATION_POINTS||le,Lt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&fe(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Lt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&fe(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Lt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Lt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(It=!1),zt&&(qt=!0),Yt&&(Nt=j({},nt),Ct=[],!0===Yt.html&&(j(Nt,J),j(Ct,ot)),!0===Yt.svg&&(j(Nt,V),j(Ct,it),j(Ct,rt)),!0===Yt.svgFilters&&(j(Nt,Z),j(Ct,it),j(Ct,rt)),!0===Yt.mathMl&&(j(Nt,tt),j(Ct,st),j(Ct,rt))),t.ADD_TAGS&&(Nt===At&&(Nt=K(Nt)),j(Nt,t.ADD_TAGS,de)),t.ADD_ATTR&&(Ct===Rt&&(Ct=K(Ct)),j(Ct,t.ADD_ATTR,de)),t.ADD_URI_SAFE_ATTR&&j(Zt,t.ADD_URI_SAFE_ATTR,de),t.FORBID_CONTENTS&&(Kt===Xt&&(Kt=K(Kt)),j(Kt,t.FORBID_CONTENTS,de)),$t&&(Nt["#text"]=!0),Ft&&j(Nt,["html","head","body"]),Nt.table&&(j(Nt,["tbody"]),delete Dt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw B('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw B('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=t.TRUSTED_TYPES_POLICY,S=E.createHTML("")}else void 0===E&&(E=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const o="data-tt-policy-suffix";e&&e.hasAttribute(o)&&(n=e.getAttribute(o));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(p,s)),null!==E&&"string"==typeof S&&(S=E.createHTML(""));A&&A(t),me=t}},ye=j({},[...V,...Z,...Q]),Te=j({},[...tt,...et]),be=function(t){O(n.removed,{element:t});try{w(t).removeChild(t)}catch(e){y(t)}},_e=function(t,e){try{O(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){O(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(qt||zt)try{be(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},we=function(t){let e=null,n=null;if(Pt)t="<remove></remove>"+t;else{const e=F(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===he&&oe===ne&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=E?E.createHTML(t):t;if(oe===ne)try{e=(new m).parseFromString(i,he)}catch(t){}if(!e||!e.documentElement){e=N.createDocument(oe,"template",null);try{e.documentElement.innerHTML=ie?S:i}catch(t){}}const s=e.body||e.documentElement;return t&&n&&s.insertBefore(o.createTextNode(n),s.childNodes[0]||null),oe===ne?D.call(e,Ft?"html":"body")[0]:Ft?e.documentElement:s},Ee=function(t){return C.call(t.ownerDocument||t,t,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Se=function(t){return t instanceof d&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof u)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},Ne=function(t){return"function"==typeof l&&t instanceof l};function Ae(t,e,o){v(t,t=>{t.call(n,e,o,me)})}const Ce=function(t){let e=null;if(Ae($.beforeSanitizeElements,t,null),Se(t))return be(t),!0;const o=de(t.nodeName);if(Ae($.uponSanitizeElement,t,{tagName:o,allowedTags:Nt}),t.hasChildNodes()&&!Ne(t.firstElementChild)&&G(/<[/\w]/g,t.innerHTML)&&G(/<[/\w]/g,t.textContent))return be(t),!0;if(t.nodeType===_t)return be(t),!0;if(Ht&&t.nodeType===wt&&G(/<[/\w]/g,t.data))return be(t),!0;if(!Nt[o]||Dt[o]){if(!Dt[o]&&Le(o)){if(Lt.tagNameCheck instanceof RegExp&&G(Lt.tagNameCheck,o))return!1;if(Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(o))return!1}if($t&&!Kt[o]){const e=w(t)||t.parentNode,n=b(t)||t.childNodes;if(n&&e){for(let o=n.length-1;o>=0;--o){const i=g(n[o],!0);i.__removalCount=(t.__removalCount||0)+1,e.insertBefore(i,T(t))}}}return be(t),!0}return t instanceof c&&!function(t){let e=w(t);e&&e.tagName||(e={namespaceURI:oe,tagName:"template"});const n=M(t.tagName),o=M(e.tagName);return!!se[t.namespaceURI]&&(t.namespaceURI===ee?e.namespaceURI===ne?"svg"===n:e.namespaceURI===te?"svg"===n&&("annotation-xml"===o||ae[o]):Boolean(ye[n]):t.namespaceURI===te?e.namespaceURI===ne?"math"===n:e.namespaceURI===ee?"math"===n&&le[o]:Boolean(Te[n]):t.namespaceURI===ne?!(e.namespaceURI===ee&&!le[o])&&!(e.namespaceURI===te&&!ae[o])&&!Te[n]&&(ce[n]||!ye[n]):!("application/xhtml+xml"!==he||!se[t.namespaceURI]))}(t)?(be(t),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!G(/<\/no(script|embed|frames)/i,t.innerHTML)?(Mt&&t.nodeType===bt&&(e=t.textContent,v([Y,at,lt],t=>{e=U(e,t," ")}),t.textContent!==e&&(O(n.removed,{element:t.cloneNode()}),t.textContent=e)),Ae($.afterSanitizeElements,t,null),!1):(be(t),!0)},Re=function(t,e,n){if(Bt&&("id"===e||"name"===e)&&(n in o||n in pe))return!1;if(It&&!vt[e]&&G(ct,e));else if(xt&&G(ht,e));else if(!Ct[e]||vt[e]){if(!(Le(t)&&(Lt.tagNameCheck instanceof RegExp&&G(Lt.tagNameCheck,t)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(t))&&(Lt.attributeNameCheck instanceof RegExp&&G(Lt.attributeNameCheck,e)||Lt.attributeNameCheck instanceof Function&&Lt.attributeNameCheck(e))||"is"===e&&Lt.allowCustomizedBuiltInElements&&(Lt.tagNameCheck instanceof RegExp&&G(Lt.tagNameCheck,n)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(n))))return!1}else if(Zt[e]);else if(G(gt,U(n,mt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==P(n,"data:")||!Jt[t]){if(Ot&&!G(ut,U(n,mt,"")));else if(n)return!1}else;return!0},Le=function(t){return"annotation-xml"!==t&&F(t,pt)},De=function(t){Ae($.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||Se(t))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ct,forceKeepAttr:void 0};let i=e.length;for(;i--;){const s=e[i],{name:r,namespaceURI:a,value:l}=s,c=de(r);let h="value"===r?l:q(l);if(o.attrName=c,o.attrValue=h,o.keepAttr=!0,o.forceKeepAttr=void 0,Ae($.uponSanitizeAttribute,t,o),h=o.attrValue,!Wt||"id"!==c&&"name"!==c||(_e(r,t),h="user-content-"+h),Ht&&G(/((--!?|])>)|<\/(style|title)/i,h)){_e(r,t);continue}if(o.forceKeepAttr)continue;if(_e(r,t),!o.keepAttr)continue;if(!kt&&G(/\/>/i,h)){_e(r,t);continue}Mt&&v([Y,at,lt],t=>{h=U(h,t," ")});const u=de(t.nodeName);if(Re(u,c,h)){if(E&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(a);else switch(p.getAttributeType(u,c)){case"TrustedHTML":h=E.createHTML(h);break;case"TrustedScriptURL":h=E.createScriptURL(h)}try{a?t.setAttributeNS(a,r,h):t.setAttribute(r,h),Se(t)?be(t):I(n.removed)}catch(t){}}}Ae($.afterSanitizeAttributes,t,null)},ve=function t(e){let n=null;const o=Ee(e);for(Ae($.beforeSanitizeShadowDOM,e,null);n=o.nextNode();)Ae($.uponSanitizeShadowNode,n,null),Ce(n),De(n),n.content instanceof r&&t(n.content);Ae($.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,s=null,a=null,c=null;if(ie=!t,ie&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Ne(t)){if("function"!=typeof t.toString)throw B("toString is not a function");if("string"!=typeof(t=t.toString()))throw B("dirty is not a string, aborting")}if(!n.isSupported)return t;if(Ut||ge(e),n.removed=[],"string"==typeof t&&(jt=!1),jt){if(t.nodeName){const e=de(t.nodeName);if(!Nt[e]||Dt[e])throw B("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)o=we("\x3c!----\x3e"),s=o.ownerDocument.importNode(t,!0),s.nodeType===Tt&&"BODY"===s.nodeName||"HTML"===s.nodeName?o=s:o.appendChild(s);else{if(!qt&&!Mt&&!Ft&&-1===t.indexOf("<"))return E&&Gt?E.createHTML(t):t;if(o=we(t),!o)return qt?null:Gt?S:""}o&&Pt&&be(o.firstChild);const h=Ee(jt?t:o);for(;a=h.nextNode();)Ce(a),De(a),a.content instanceof r&&ve(a.content);if(jt)return t;if(qt){if(zt)for(c=L.call(o.ownerDocument);o.firstChild;)c.appendChild(o.firstChild);else c=o;return(Ct.shadowroot||Ct.shadowrootmode)&&(c=W.call(i,c,!0)),c}let u=Ft?o.outerHTML:o.innerHTML;return Ft&&Nt["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&G(ft,o.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+u),Mt&&v([Y,at,lt],t=>{u=U(u,t," ")}),E&&Gt?E.createHTML(u):u},n.setConfig=function(){ge(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ut=!0},n.clearConfig=function(){me=null,Ut=!1},n.isValidAttribute=function(t,e,n){me||ge({});const o=de(t),i=de(e);return Re(o,i,n)},n.addHook=function(t,e){"function"==typeof e&&O($[t],e)},n.removeHook=function(t,e){if(void 0!==e){const n=x($[t],e);return-1===n?void 0:k($[t],n,1)[0]}return I($[t])},n.removeHooks=function(t){$[t]=[]},n.removeAllHooks=function(){$={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const At=t=>{try{const e={ADD_ATTR:["src-disabled","sma-type","src-unchecked","src-enabled","x-mclocalizedtext","x-mcsrc","x-mcinsertposition","x-inputplaceholder","x-mcl10nprocessed","target"]};return Nt.sanitize(t,e)}catch(t){return""}};class Ct{static async loadTemplate(t,e,n=null,o={}){const{hostStyles:i}=t,s=document.createElement("div");for(const t in i)s.style[t]=i[t];const r=o?.shadowDomMode||"closed",a=s.attachShadow({mode:r});return Ct.populateFonts(e?.fontHref),await Ct.populateContainer(e,a),n&&await Ct.populateContainer(n,a),o?.customAppendFn&&"function"==typeof o.customAppendFn?o.customAppendFn(s):document?.body?.appendChild(s),{hostNode:s,shadowRoot:a}}static async populateContainer(t,e){const{htmlPath:n,cssPath:o,containerId:i,waImageSecret:s}=t,r=await Ct.getTemplate(n,o,s);(i&&e.querySelector(`#${i}`)||e).appendChild(r)}static async reloadTemplate(t,e,n){n.innerHTML="",e&&await Ct.populateContainer(e,n),await Ct.populateContainer(t,n)}static async getTemplate(t,e=null,n){const o=new b,i=document.createElement("template"),s=await o.sendHttpRequest({url:chrome.runtime.getURL(t)}),r=await s.text();let a="";if(e){const t=await o.sendHttpRequest({url:chrome.runtime.getURL(e)});a=await t.text(),a=`<style>${At(a)}</style>`}i.innerHTML=`${a}${At(r)}`;for(const t of i.content.querySelectorAll("img[x-mcsrc]:not([x-mcsrcparsed])")){t.getAttribute("src").includes("?secret")||(t.src=chrome.runtime.getURL(`${t.getAttribute("src")}?secret=${n}`),t.setAttribute("x-mcsrcparsed",!0))}return i.content.cloneNode(!0)}static fadeIn(t){t.style.opacity=0,t.style.display="block",function e(){const n=+t.style.opacity+.1;n<1&&(t.style.opacity=n,window.requestAnimationFrame(e))}()}static fadeOut(t,e){let n=!1;t.style.opacity=1,function o(){if(n)return;const i=+t.style.opacity-.1;i<=0?(n=!0,t.style.display="none",e()):(t.style.opacity=i,window.requestAnimationFrame(o))}()}static populateFonts(t){const e=t=>{try{const e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.head.appendChild(e)}catch(t){y.error(t)}},n=chrome.runtime.getURL("css/mcafee_fonts.css");n&&e(n),t&&"string"==typeof t&&e(t)}}class Rt{constructor(t,e=null,n={}){this.closing=!1,this.showing=!1,this.animateReload=!0,this.allowReplace=!0,this.componentData=null,this.template=null,this.hostNode=null,this.shadowRoot=null,this.hostStyles=t,this.baseTemplate=e,this.showContainer=this.showContainer.bind(this),this.closeContainer=this.closeContainer.bind(this),this.query=this.query.bind(this),this.querySelectorAll=this.querySelectorAll.bind(this),this.clickListener=this.clickListener.bind(this),this.mouseoverListener=this.mouseoverListener.bind(this),this.mouseoutListener=this.mouseoutListener.bind(this),this.dblclickListener=this.dblclickListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.isShowing=this.isShowing.bind(this),this.bgGrayout=!1,this.bgGrayoutElement=null,this.closingShadowDomListener=n.closingShadowDomListener,this.shadowDomMode=n.shadowDomMode||"closed",this.isTrustCheckRequired=n.isTrustCheckRequired||!0,this.resize=!1,this.domHeight=""}async initContainer(t,e=null,n={}){if(this.closing)return y.log("initContainer still closing"),!1;if(y.log("initContainer start"),this.showing&&!1===this.allowReplace&&Rt.isSameObject(t,this.template))return!1;if(this.componentData&&JSON.stringify(this.componentData)===JSON.stringify(e))return!1;this.componentData=e;const{allowReplace:o=!0,animateReload:i=!0,resize:s=!1}=t;if(this.allowReplace=o,this.animateReload=i,this.resize=s,this.showing=!0,this.hostNode&&o)return await this.reloadContainer(t),!0;let r={...t};this.template=r,null===this.baseTemplate&&(this.baseTemplate=r,r=null);const a={hostStyles:{...this.hostStyles.DEFAULT,...this.hostStyles.HIDE}},l={shadowDomMode:this.shadowDomMode,customAppendFn:n.customAppendFn},{hostNode:c,shadowRoot:h}=await Ct.loadTemplate(a,this.baseTemplate,r,l);return this.hostNode=c,this.shadowRoot=h,this.resize&&window.addEventListener("resize",this.resizefn.bind(this)),!0}isShowing(){return this.showing}static isSameObject(t=null,e=null){return null===t&&null===e||t&&e&&JSON.stringify(t)===JSON.stringify(e)}async reloadContainer(t,e=this.animateReload){await this.closeContainer(!1,e),this.template=t,await Ct.reloadTemplate(t,this.baseTemplate,this.shadowRoot)}showBackgroundGrayout(t){if(this.bgGrayout=t,!t)return;this.bgGrayoutElement=document.createElement("div"),this.bgGrayoutElement.style.cssText="display:none; width: 100%; height: 100%; position: fixed; top: 0px; left: 0px; z-index: 99999; background: rgba(0, 0, 0, 0.3);";const e=document.querySelector("body");e.append(this.bgGrayoutElement),e.style.overflow="hidden",Ct.fadeIn(this.bgGrayoutElement)}hideBackgroundGrayOut(){this.bgGrayoutElement&&this.bgGrayout&&(Ct.fadeOut(this.bgGrayoutElement,()=>{}),document.querySelector("body")?.style&&(document.querySelector("body").style.overflow="auto"),this.bgGrayout=!1)}showContainer(t={}){setTimeout(()=>{const e=t?.bgGrayout;this.showBackgroundGrayout(e);for(const t in this.hostStyles.SHOW)this.hostNode.style[t]=this.hostStyles.SHOW[t];this.resize&&this.hostNode&&(this.domHeight="",this.getContainerHeight())},t?.delay||0)}async closeContainer(t=!0,e=!0){if(this.closing)return;this.hideBackgroundGrayOut(),this.closing=!0,"function"==typeof this.closingShadowDomListener&&this.closingShadowDomListener();const n=()=>{this.closing=!1,this.showing=!1,t&&(this.hostNode&&this.hostNode.remove(),this.hostNode=null,this.componentData=null,this.template=null,this.shadowRoot=null,this.baseTemplate=null)};if(!e)return void n();const o={...this.hostStyles.DEFAULT,...this.hostStyles.HIDE};for(const t in o)this.hostNode&&(this.hostNode.style[t]=o[t]);const i=new Promise(t=>{setTimeout(()=>{n(),t()},500)});await i}query(t){return this.shadowRoot?.querySelector(t)}querySelector(t){return this.shadowRoot?.querySelector(t)}querySelectorAll(t){return this.shadowRoot?.querySelectorAll(t)}clickListener(t,e){const n=this.shadowRoot?.querySelector(t);n&&n.addEventListener("click",t=>{this.isTrustCheckRequired&&!t.isTrusted||e(t)})}mouseoverListener(t,e){const n=this.shadowRoot?.querySelector(t);n&&n.addEventListener("mouseover",t=>{this.isTrustCheckRequired&&!t.isTrusted||e(t)})}mouseoutListener(t,e){const n=this.shadowRoot?.querySelector(t);n&&n.addEventListener("mouseout",t=>{this.isTrustCheckRequired&&!t.isTrusted||e(t)})}dblclickListener(t,e){const n=this.shadowRoot?.querySelector(t);n&&n.addEventListener("dblclick",t=>{this.isTrustCheckRequired&&!t.isTrusted||e(t)})}mousedownListener(t,e){const n=this.shadowRoot?.querySelector(t);n&&n.addEventListener("mousedown",t=>{this.isTrustCheckRequired&&!t.isTrusted||e(t)})}getContainerHeight(){let t=3;const e=setInterval(()=>{this.hostNode?(this.domHeight!==this.hostNode.offsetHeight&&(this.domHeight=this.hostNode.offsetHeight,this.resizefn()),--t<=0&&clearInterval(e)):clearInterval(e)},1e3)}resizefn(){if(!this.hostNode)return;const t=window.innerHeight;this.domHeight>t?(this.hostNode.style.height=`${t}px`,this.hostNode.style["overflow-y"]="scroll"):this.domHeight<window.innerHeight&&(this.hostNode.style.height="Auto",this.hostNode.style["overflow-y"]="unset")}}const Lt={DEFAULT:{top:"0",padding:"0",margin:"0",zIndex:"2147483646",position:"fixed",border:"none",opacity:"0",left:"0",display:"block",boxShadow:"0 0 10px rgba(0, 0, 0, 0.12)"},HIDE:{transition:"width 0s 0.4s, height 0s 0.4s, opacity 0.4s, transform 0.4s",transform:"translate3d(0, -80px, 0)",opacity:"0",width:"0"},SHOW:{transition:"opacity 0.4s, transform 0.4s",transform:"translate3d(0, 0, 0)",opacity:"1",width:"100%",backgroundColor:"transparent"}},Dt={DEFAULT:{top:"50px",padding:"0",margin:"0",zIndex:"2147483645",position:"fixed",border:"none",opacity:"0",left:"auto",right:"0",display:"block",maxWidth:"none",backgroundColor:"transparent"},HIDE:{transition:"width 0s 0.4s, height 0s 0.4s, opacity 0.4s, transform 0.4s",transform:"translate3d(0, -350px, 0)",opacity:"0",width:"464px",height:"0"},SHOW:{transition:"opacity 0.1s 0.4s",transform:"translate3d(0, 0, 0)",opacity:"1",width:"464px",height:"auto"}};class vt extends Rt{constructor({shadowMode:t,isTrustCheckRequired:e}){super(Lt,null,{shadowDomMode:t,isTrustCheckRequired:e})}async init(t,e){return await this.initContainer(t,e)}}class xt extends Rt{constructor({shadowMode:t,isTrustCheckRequired:e}){super(Dt,null,{shadowDomMode:t,isTrustCheckRequired:e})}async init(t,e){return await this.initContainer(t,e)}}class It{constructor({shadowMode:t,isTrustCheckRequired:e}){this.topContainer=new vt({shadowMode:t,isTrustCheckRequired:e}),this.rightContainer=new xt({shadowMode:t,isTrustCheckRequired:e})}async initTop(t,e){return await this.topContainer.init(t,e)}async initRight(t,e){return await this.rightContainer.init(t,e)}}const Ot=async(t,e,n,o)=>{try{chrome.tabs.sendMessage(o,{ipcId:t,command:e,...n},{},()=>{chrome.runtime.lastError})}catch(t){y.warn(`[broadcast] Unexpected error when calling command: "${e}", err: ${t.message}`)}},kt=(t,e,n,o,i=null)=>{if(!chrome.tabs)throw new Error('"tabs" permission not set in manifest.');const s={};return"number"==typeof i&&(s.frameId=i),chrome.tabs.sendMessage(o,{ipcId:t,command:e,...n},s)},Mt=(t,e={},n)=>(async(t,e,n={},o={})=>{try{if(o?.tabId){const{tabId:i,frameId:s}=o;return await kt(t,e,n,i,s)}if(o?.broadcast){const i=await chrome.tabs.query({}),{broadcastIgnoreId:s=[]}=o;return i.filter(({id:t})=>!s.includes(t)).forEach(({id:o})=>{Ot(t,e,n,o)}),!0}return await chrome.runtime.sendMessage({ipcId:t,command:e,...n})}catch(t){return y.warn(`Unexpected error when calling command: "${e}", err: ${t.message}`),null}})("WA",t,e,n),Ht=chrome;class Ft{static geti18nRes(t,e=[]){let n=Ht.i18n.getMessage(t,e);const o=Ht.i18n.getMessage("res_PRODUCT_NAME_TRADEMARKED");return n=n.replace(/%PRODUCTNAME%/g,o),n}static getResStr(t,e){const n=Ft.geti18nRes(t);e("??"===n?"":n)}static async getFileSource(t){try{return(await fetch(Ht.runtime.getURL(t))).text()}catch(t){return""}}}class Ut{constructor(t=null,e=document){if(this.resourcerequestor=Ft,this.document=e,t){const e=this.document.querySelectorAll(`#${t}`);e&&(this.document=e[0].contentDocument)}this.localeData=this.localeData.bind(this),this.fillText=this.fillText.bind(this),this.fillLocalizedTexts=this.fillLocalizedTexts.bind(this),this.fillInputPlaceHolders=this.fillInputPlaceHolders.bind(this)}localeData(t,e=[]){return this.resourcerequestor.geti18nRes(t,e)}fillText(t,e){const n=this.document.getElementById(t);if(n){const t=n.getAttribute("x-mcinsertposition");if(t)return void n.insertAdjacentText(t,e);n.textContent=e,n.setAttribute("x-mcl10nprocessed",!0)}}fillLocalizedTexts(){for(const{id:t}of this.document.querySelectorAll("*[x-mclocalizedtext]:not([x-mcl10nprocessed=true])")){const e=this.localeData(t);if(null==e)return!1;this.fillText(t,e)}return!0}fillInputPlaceHolders(){for(const{id:t}of this.document.querySelectorAll("*[x-inputplaceholder]")){const e=this.localeData(t),n=this.document.getElementById(t);if(null==e)return!1;null!=n&&n.setAttribute("placeholder",e)}return!0}init(){this.fillLocalizedTexts(),this.fillInputPlaceHolders()}}const Pt="cancel",qt="submit",zt="close";class Gt{constructor(t,e,n=null){this.componentData=t,this.closeUICallback=n,this.containerHandler=e,this.shadowRoot=e.shadowRoot,this.query=e.query,this.querySelectorAll=e.querySelectorAll,this.showContainer=e.showContainer,this.closeContainer=e.closeContainer,this.clickListener=e.clickListener,this.waImageSecret=e.waImageSecret,this.selectedRating=null,this.strConvertor=new Ut(null,this.shadowRoot),this.extensionIds={}}async init(){this.classObject={},this.componentData.options=this.options,this.mbExtId=await Mt(n,{extensionName:"WebBoost"}),this.settings=await Mt(s),this.strConvertor.init(),this.showContainer(),this.initText(),this.initListeners()}initText(){const{WB_LAST_SHOWN_DATE:t}=this.settings;if(!t)return;const e=0===t.value;this.query("#wb_container__right__title").innerHTML=e?this.strConvertor.localeData("wb_container__right__title"):this.strConvertor.localeData("wb_container__right__title_second");const n=this.strConvertor.localeData("wb_name_title");this.query("#wb_container__right__content").innerHTML=e?this.strConvertor.localeData("wb_container__right__content",[n]):this.strConvertor.localeData("wb_container__right__content_second",[n]);const o=`<b>${this.strConvertor.localeData("wb_container__right__submit")}</b>`,i=`<a href="https://www.mcafee.com/legal" target="_blank" rel="noopener noreferrer">${this.strConvertor.localeData("wb_container__right__eula_licence_agreement")}</a>`,s=`<a href="https://www.mcafee.com/legal" target="_blank" rel="noopener noreferrer">${this.strConvertor.localeData("wb_container__right__eula_privacy_notice")}</a>`,r=this.strConvertor.localeData("wb_container__right__eula",[o,i,s]);this.query("#wb_container__right__eula").innerHTML=r}initListeners(){this.clickListener("#wb_container__right__submit",()=>{Mt(e,{extension_id:this.mbExtId,redirect_url:""}),this.eventHandler(qt)}),this.clickListener("#wb_container__right__cancel",()=>{this.eventHandler(Pt)})}async eventHandler(t){const{WB_SHOWN:e,WB_LAST_SHOWN_DATE:n}=this.settings;if(!n||!e)return;const o=0===n.value,s=Math.floor((new Date).getTime()/1e3);let r=!o||e.value,a="";t===qt?(r=!0,a=o?"Accept":"AcceptSecond"):t===Pt?a=o?"Reject":"RejectSecond":t===zt&&(a=o?"Close":"CloseSecond");const l={...e,value:r},c={...n,value:s};Mt(i,{settings:[l,c]});const h={_event_name:"wa_webboost_upsell_interaction",hit_label_19:a,hit_label_20:"CH"};this.sendAnalyticsEvent(h),this.closeUI()}closeUI(){this.closeContainer(),this.siblingInstance&&this.siblingInstance.closeContainer()}sendAnalyticsEvent(t){Mt(o,{telemetry:JSON.stringify(t)})}setSibling(t){this.siblingInstance=t}}class Bt{constructor(t,e){this.componentData=t,this.telemetryData={},this.shadowRoot=e.shadowRoot,this.showContainer=e.showContainer,this.closeContainer=e.closeContainer,this.clickListener=e.clickListener,this.query=e.query,this.strConvertor=new Ut(null,this.shadowRoot),this.siblingInstance=null}async init(){this.strConvertor.init(),this.initListeners(),this.initText(),this.showContainer(),this.query("#wb_top__logo").focus()}initListeners(){this.clickListener("#wb_top__close_btn",()=>{this.siblingInstance.eventHandler(zt)})}initText(){const t=this.strConvertor.localeData("wb_name_title");this.query("#wb_top__body__message").innerHTML=this.strConvertor.localeData("wb_top_banner_left_text",[t])}setSibling(t){this.siblingInstance=t}}class Wt{constructor(t,e){this.topbarComponent=new Bt(t,e.topContainer),this.rightBarComponent=new Gt(t,e.rightContainer),this.topbarComponent.setSibling(this.rightBarComponent),this.rightBarComponent.setSibling(this.topbarComponent)}async init(){await this.rightBarComponent.init(),await this.topbarComponent.init()}}class $t{constructor(){this.savedComponentDetails=null,this.isForegroundPage=!1,this.componentMap={[a]:{RIGHT:{htmlPath:"html/topright_bar/web_boost_upsell_right.html",cssPath:"css/web_boost_upsell_right.css",resize:!0},TOP:{htmlPath:"html/topright_bar/web_boost_upsell_top.html",cssPath:"css/web_boost_upsell_top.css"},Component:Wt}}}processMessage(t,e=!1){this.isForegroundPage=e;const{subcommand:n}=t;n&&this.RenderUIContainer(t)}async RenderUIContainer(e){const{subcommand:n,componentData:o}=e;if(!n)return;const i=this.componentMap[n];if(!i)return;const{TOP:s,RIGHT:r,Component:a}=i,l=await Mt(t),c=JSON.parse(l);s.waImageSecret=c.WA_IMAGE_SECRET,r.waImageSecret=c.WA_IMAGE_SECRET;const h=new It(c);if(!await h.initTop(s,o))return;await h.initRight(r,o)&&new a(o,h).init()}}class jt{constructor(){this.observer=null,this.clientNotified=!1,this.autoplayDetectedFn=null}_recursiveProcess(t){for(let e=0;e<t.childNodes.length;++e){if(this.clientNotified)return;this._recursiveProcess(t.childNodes[e])}if(t instanceof HTMLMediaElement){if(this.clientNotified)return;t.autoplay&&(this.clientNotified=!0,this.autoplayDetectedFn(t))}}init(t){this.autoplayDetectedFn=t,this.observer=new MutationObserver(this.handleMutations.bind(this)),this.observer.observe(document,{childList:!0,subtree:!0});const e=document.querySelectorAll("audio, video");for(let t=0;t<e.length&&!this.clientNotified;++t)e[t].autoplay&&e[t].currentSrc&&(this.clientNotified=!0,this.autoplayDetectedFn(e[t].src))}handleMutations(t){t.forEach(t=>{for(const e of t.addedNodes)this._recursiveProcess(e),this.clientNotified&&this.observer.disconnect()})}}(new class extends T{constructor(){super(r),this.topRightUIHandler=new $t}autoRunVideo(){const t={subcommand:a,componentData:{}};this.topRightUIHandler.processMessage(t)}main(){(new jt).init(()=>this.autoRunVideo())}}).main()})();
//# sourceMappingURL=../sourceMap/chrome/scripts/content_web_boost_upsell.js.map